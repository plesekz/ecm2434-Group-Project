<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
  </head>
  <body>
    <script type="module">
      import init, { load_qr } from './pkg/qr_wasm.js';

      async function run() {
        await init();
        
        var loadQRinput = document.getElementById("loadQR");
        loadQRinput.onchange = () => {
          console.log("Loading " + loadQRinput.files.length + " files");
          for (let i = 0; i < loadQRinput.files.length; i++) {
            load_qr(loadQRinput.files[i]);
          }
        }
      }

      run();
    </script>
    <form>
      <input type="file" id='loadQR' name="file" accept="image/*" capture="camera" />
    </form>
    
  </body>
</html>
